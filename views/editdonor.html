<div class="page">
   <h2 class="title">
   </h2>
   <div class="row">
      <div class="col-md-12">
         <section class="panel panel-default" style="border-radius:0px;">
            <div class="panel-heading panel-hdr">
               <span class="glyphicon glyphicon-th mr5"></span>Edit Donor
            </div>
            <form>
               <div class="panel-body">
                  <div class="row" ng-if="donor.discontinued=='yes'">
                     <div class="col-md-offset-4 col-md-4 text-center">
                        <img src="img/cross.png" class="img-responsive" style="width:50px;margin: 0 auto;">
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>Donor Id</label>
                           <input type='text' class='form-control' ng-model='donor.donorid' placeholder='Donor Id' required disabled> </div>
                     </div>
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>Family Id</label>
                           <input type='text' class='form-control' ng-model='donor.familyid' placeholder='Family Id' disabled>
                        </div>
                     </div>
                     <div class="col-md-4" ng-click="openHistory();">
                        <div class="box">
                           <div class="text">
                              <h4 class="text-center nomg">Donation Count</h4>
                              <h4 class="text-center nomg">{{donor.donationcount}}</h4>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>Last Name</label>
                           <input type='text' class='form-control' ng-model='donor.lastname' placeholder='Last Name' required capitalize-first> </div>
                     </div>
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>First Name</label>
                           <input type='text' class='form-control' ng-model='donor.firstname' placeholder='First Name' required capitalize-first> </div>
                     </div>
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>Middle Name</label>
                           <input type='text' class='form-control' ng-model='donor.middlename' placeholder='Middle Name' required capitalize-first> </div>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>Email</label>
                           <input type='email' class='form-control' ng-model='donor.email' placeholder='Email'>
                        </div>
                     </div>
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>Gender</label>
                           <select ng-model='donor.gender' class='form-control' required>
                              <option value='Male'>Male</option>
                              <option value='Female'>Female</option>
                           </select>
                        </div>
                     </div>
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>Blood Group</label>
                           <select ng-model='donor.bloodgroup' class='form-control' required>
                              <option value='A-'>A-</option>
                              <option value='A+'>A+</option>
                              <option value='B-'>B-</option>
                              <option value='B+'>B+</option>
                              <option value='AB-'>AB-</option>
                              <option value='AB+'>AB+</option>
                              <option value='O-'>O-</option>
                              <option value='O+'>O+</option>
                           </select>
                        </div>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>Birth date</label>
                           <input type='date' class='form-control' ng-model='donor.birthdate' placeholder='Birth date' ng-change="calculate();" required>
                        </div>
                     </div>
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>Age</label>
                           <input type='text' class='form-control' ng-model='donor.age' placeholder='Age' readonly>
                        </div>
                     </div>
                     <div class="col-md-4">
                        <div class='form-group ui-selecter'>
                           <label for='exampleInputEmail1'>Select Village</label>
                           <div class='form-group'>
                              <ui-select multiple tagging tagging-label='false' ng-model='donor.village' on-select='ismatchVillage(donor.village,$select);'>
                                 <ui-select-match placeholder='Select Village'>{{$item.name}}</ui-select-match>
                                 <ui-select-choices repeat='person in village track by person._id' refresh='refreshVillage($select.search,$select.selected)' refresh-delay='0'>
                                    <div ng-bind-html='person.name'></div>
                                 </ui-select-choices>
                              </ui-select>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>Previous Name</label>
                           <input type='text' class='form-control' ng-model='donor.previousname' placeholder='Previous Name' capitalize-first>
                        </div>
                     </div>
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>Address 1</label>
                           <input type="text" class='form-control' ng-model='donor.address1' placeholder='Address 1' capitalize-first required>
                        </div>
                     </div>
                     <div class="col-md-4">
                        <div class="form-group">
                           <label>Address 2</label>
                           <input type="text" class='form-control' ng-model='donor.address2' placeholder='Address 2' capitalize-first>
                        </div>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>Area</label>
                           <input type='text' class='form-control' ng-model='donor.area' placeholder='Area' capitalize-first>
                        </div>
                     </div>
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>City</label>
                           <input type='text' class='form-control' ng-model='donor.city' placeholder='City' capitalize-first>
                        </div>
                     </div>
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>Pincode</label>
                           <input type='text' class='form-control' ng-model='donor.pincode' placeholder='Pincode' required only-digits ng-trim="false" maxlength="6"> </div>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-md-4">
                        <div class="form-group">
                           <label>Landline 1</label>
                           <input type="text" class='form-control' ng-model='donor.tel1' placeholder='Landline 1' only-digits>
                        </div>
                     </div>
                     <div class="col-md-4">
                        <div class="form-group">
                           <label>Landline 2</label>
                           <input type="text" class='form-control' ng-model='donor.tel2' placeholder='Landline 2' only-digits>
                        </div>
                     </div>
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>Mobile no</label>
                           <input type='text' class='form-control' ng-model='donor.mobile' placeholder='Mobile no' only-digits ng-trim="false" maxlength="10">
                        </div>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-md-4">
                        <div class="form-group">
                           <label>Discontinued</label>
                           <select class='form-control' ng-model="donor.discontinued" required>
                              <option value='yes'>Yes</option>
                              <option value='no'>No</option>
                           </select>
                        </div>
                     </div>
                     <div class="col-md-4" ng-if="donor.discontinued=='yes'">
                        <div class='form-group'>
                           <label>Discontinue Reason</label>
                           <select class='form-control' ng-model="donor.reason" required>
                              <option value=''>Please Select</option>
                              <option value='SMS'>SMS</option>
                              <option value='Multiple members for family'>Multiple members for family</option>
                              <option value='Not fit for donation'>Not fit for donation</option>
                              <option value='Death'>Death</option>
                           </select>
                        </div>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-md-4">
                        <div class="form-group" ng-if="access.accesslevel == 'entry'">
                           <label>Hospital</label>
                           <select class='form-control' ng-model="donor.hospital" ng-options="hospital._id as hospital.name for hospital in hospitals">
                           </select>
                        </div>
                     </div>
                     <div class="col-md-4">
                        <div class='form-group'>
                           <label>Weight (in kgs.)</label>
                           <input id="txtWeight" type='text' class='form-control' ng-model='donor.weight' placeholder='Weight (in kgs.)' only-digits ng-trim="false">
                        </div>
                     </div>
                     <div class="col-md-4">
                        <div class='form-group' ng-if="showbottle">
                           <label>Bottle Number</label>
                           <input id="bottle" type='text' class='form-control' ng-model='donor.bottle' placeholder='Bottle Number' only-digits ng-trim="false" ng-change="bottleCheck();">
                        </div>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-md-4" ng-if="bottleExist==0">
                        <div class="form-group text-center">
                           <span style="color:red;"><b>Bottle Number Already Exists. <br>Assinged To : {{assignedTo}}</b></span>
                        </div>
                     </div>
                     <div class="col-md-4" ng-if="showfail == 1">
                        <div class="form-group text-center">
                           <span style="color:red;"><b>Some error. Please submit again.</b></span>
                        </div>
                     </div>
                  </div>
                  <div class="row" ng-if="showAgeError==true">
                     <div class="col-md-12">
                        <div class="form-group text-center">
                           <span style="color:red;"><b>Your age should be between 18 and 70</b></span>
                        </div>
                     </div>
                  </div>
                  <div class="row" ng-if="showPinError==true">
                     <div class="col-md-12">
                        <div class="form-group text-center">
                           <span style="color:red;"><b>Invalid Pincode</b></span>
                        </div>
                     </div>
                  </div>
                  <div class="row" ng-show="showSaved">
                     <div class="col-md-12">
                        <div class="form-group text-center">
                           <span><b>Updated Successfully !</b></span>
                        </div>
                     </div>
                  </div>
                  <div class="row" ng-show="showBottleError">
                     <div class="col-md-12">
                        <div class="form-group text-center">
                           <span style="color:red;"><b>Enter Bottle Number</b></span>
                        </div>
                     </div>
                  </div>
                  <div class="row" ng-show="showMobileErr">
                     <div class="col-md-12">
                        <div class="form-group text-center">
                           <span style="color:red;"><b>Invalid Mobile No</b></span>
                        </div>
                     </div>
                  </div>
                  <div class="row" ng-if="showWeightErr">
                     <div class="col-md-12">
                        <div class="form-group text-center">
                           <span style="color:red;"><b>Invalid Weight</b></span>
                        </div>
                     </div>
                  </div>
                  <div class="row" ng-show="showWeightErr">
                     <div class="col-md-12">
                        <div class="form-group text-center">
                           <span style="color:red;"><b>Please Enter Weight</b></span>
                        </div>
                     </div>
                  </div>
                  <!--Add New Tags-->
               </div>
            </form>
            <div class="text-center" style="padding-bottom:20px;" ng-if="access.accesslevel == 'admin' || access.accesslevel == 'entry'">
               <button style="margin-right:20px" class="btn btn-primary all-btn" ng-click="onlyEditUser();">Save
               </button>
               <button class="btn btn-primary all-btn" ng-click="savedonor();" ng-if="access.accesslevel == 'entry'">Submit & Print
               </button>
            </div>
         </section>
      </div>
   </div>
</div>
<script>
   $(document).ready(function() {
      $("#txtWeight").focus();
      $("input:text").focus(function() {
         $(this).select();
      });
   });
</script>
